# powershell：如何运行代码

从这节课开始，欢迎各位学员走进程序的世界。

本节课会介绍powershell，他是一个windows上的软件，是一个能让你看起来非常专业非常geek的软件。这个软件不需要额外的安装，是window系统自带的，他是一个几乎万能的软件，只是看上去很简陋。

这个软件的功能只有一个：运行电脑上的所有可以运行的软件。

这里的软件包括平时我们用鼠标双击打开的有界面的软件，以及我们现在正在学习的那些没有界面的软件。为什么说从这节课开始，大家才真正走进程序的世界呢？这是有理由的。这里给大家说明这样一个事实，对于大部分工程师而言，很多软件是不需要界面的，因为那些注重功能实现的程序而言，界面的设计是十分吃力不讨好的工作，且某些情况下，界面的加入反而会降低程序配置的效率。所以，在网上能找到的非商用代码或开源项目，大部分都是没有界面的。而平时我们用到的诸如word之类拥有完善的，经过科学设计的商用软件，其实只占很小的一部分。而为了运行这些没有界面的软件或代码，我们将使用到powershell。这里需要补充的是，网上的其他资料会说到cmd，或“命令提示符”，可以理解为是一样的东西，powershell是加强版的cmd。

首先，我们来打开powershell，有两种方式，这里暂时只介绍一种，之后我们讲完“工作路径”这个概念以后，再说第二种。

* 第一步，win键+R，在桌面左下角弹出“运行”框。win键即键盘左下角，一个旗子一样的按键
* 第二步，输入powershell，回车，则会弹出一个深蓝色的界面，这便是powershell
* 第二步大家也可以输入cmd，回车，则会弹出一个黑色的界面，这是cmd，是powershell的简单版本，有很多powershell中能用的功能cmd不能直接使用，建议大家可以直接使用powershell就好，不必过分纠结两者的区别。

如果大家还不清楚，可以看下面的动图。

[动图]

打开powershell以后，我们能做什么呢？这里我带大家了解几个，今后会接触到的“命令”。这里的“命令”或者“命令行”，其实也是一个个windows系统自带的小程序，但是就像刚刚说到的，他们是没有界面的程序，他们的作用往往很单一直接，且会涉及到系统的一些较为底层的设置。这里会介绍的“命令”有：pwd和工作路径的概念，ls，cd与相对路径，cat/head/tail，强制终止程序（ctrl+c），clear

## pwd命令和工作路径

在第九课中，我们学习了文件路径和的概念，知道了路径标志了一个电脑中位置位置，文件路径就是一个文件或文件夹在电脑中的位置信息，那么工作路径其实也就好理解了，就是“我们现在所在的”电脑中的位置信息。

我什么是“我们现在所在的”呢，打个比方，我们把电脑想象成一本书，电脑中的每个文件就是书中的内容，而文件夹就是书中的章节。打开powershell，我们就是打开了这本书。一本书有很多内容，每个章节中有不用的内容，这个”章节“或者”页码“就是我们所说路径。比如现在我要找某个公式，在第五章第三小节，76页，这个时候我们需要翻书翻到这一页，才能找到这个公式。而工作路径就是“我们现在看着的这一页的位置

这里可以结合pwd命令理解。通过上面的方法打开powershell，然后输入pwd三个字母，按回车。会发现在框框中出现了一个“路径”，这个路径就是“工作路径”，即我们现在所在的位置。一般windows系统的初始工作路径 C:/User/xxxxx（你登录这台电脑的用户名)，这便是“我们所在的路径”

这个路径毫无疑问是对应到电脑中的某个位置的，我们可以很简单的找到这个位置：随便点开一个文件夹，左边栏中点击电脑，C盘，User文件夹，xxxxx文件夹，就能进到这个路径下了。所以很直接的，pwd这个命令，就是看我们当前在哪个路径下，看我们当前所在的电脑中的位置的。pwd是print work directory的缩写，即“打印工作路径”的意思

如果大家还对工作路径的概念不了解，不要着急，我们接下来说的ls命令会让大家对工作路径有更加具体的理解

## ls命令：当前工作路径下有什么？

 pwd命令解决了where的问题，即我们现在在哪。ls命名的作用也很简单直接，即解决what的问题：工作目录下有些什么。接着刚刚的，我们在powershell中输入"ls"然后回车，此时会发现一堆信息被打出来了，如下图：

【powershell的截图】

很明显，ls命令显示了在当前工作路径下有哪些文件和文件夹。我们可以对照确认一下，按照之前的方法在界面中打开这个文件夹，这个文件夹中的内容是和ls命令中打印的内容是一一对应的，分别有文件或文件夹的名字，大小等信息。这样大家应该能对工作路径有一个比较直观的理解了。ls命令是list的缩写，即“列出”。ls命令的作用是，列出当前工作路径下有哪些文件，哪些文件夹。

## cd命令：修改工作路径/前往某个路径及相对路径

pwd和ls可以告诉我们现在在哪，现在有啥。但是我们不能只停留在一个地方，我们希望动起来，我们希望“翻页”。cd这个命令能满足我们的需求。注意，ls命令和pwd命令都是只需要打本身的解字母即可，而cd命令需要在后面跟一个路径。比如，也许大家会习惯把很多资料文件堆放在桌面上。也许许多同学已经知晓的，实际上“桌面”也是一个文件夹，对应了一个路径，在windows的文件管理器中其实很容易找到，桌面所在的位置一般是：C://User/your_username/Desktop

注意！这里的your_username需要替换成大家进入系统时使用的用户名，如果实在不知道自己的用户名，可以通过这个[链接](https://zhidao.baidu.com/question/404937983.html)中的教程做查找，这里就不再过多赘述了。假设我的用户名是Kevin，那么桌面的路径一般是C://User/Kevin/Desktop，为了方便起见，后面的说明中都会用“Kevin”。

那么，我们如何在powershell中进入到“桌面”呢？我们用到cd命令。在powershell中输入：

cd C://User/Kevin/Desktop 回车

这个时候，如果电脑中确实有C://User/Kevin/Desktop这么一个文件夹，那么我们已经让powershell进入到这个文件夹了，即当前我们的工作路径就是桌面的路径。我们现在可以尝试用pwd命令和ls命令查看当前工作路径已经当前工作路径下的文件和文件夹，如下图

接下来，我们来学习一个叫做“相对路径”的概念。刚刚我们看到的C://User/Kevin/Desktop，我们称之为绝对路径，即与当前工作路径在哪无关，一个绝对路径唯一的指向电脑中的某个文件夹或者说逻辑位置。而顾名思义，相对路径是“相对于某个路径而言”的路径，我们需要有一个路径作为参照物，而这个用来参照的路径就是当前的工作路径。

./ 指的是当前的工作路径 ../指的是当前工作路径的上一层路径。

上面的描述比较抽象，我们来举例说明。假设现在C://User/Kevin/Desktop，即桌面上，有一个文件夹叫text，紧接着刚刚的操作，我们现在的工作路径是C://User/Kevin/Desktop，我们要用cd进入到text这个文件夹中，怎么做呢？有两种做法：

一个是上面提到的，使用绝对路径，我们知道text文件夹的绝对路径是C://User/Kevin/Desktop/text，则我们可以用命令cd C://User/Kevin/Desktop/text 回车 来进入到text下。

第二种方法就是使用相对路径，cd ./text 回车，会比上面的命令方便很多，指的是，我要进入到当前工作路径下，一个叫text的文件夹内。

现在我们进到了C://User/Kevin/Desktop/text里，处理完一些事情以后，我们希望进到C://User/Kevin/Desktop/movie文件夹中处理别的事情。用相对路径来写就是 cd ../movie 回车，即我要进入到当前工作路径的上一层路径中一个叫movie的文件夹内。

当然./ 和 ../都是可以连着用的，比如cd ../../file指的是，进入到当前工作路径的前面上一层路径的上一层路径的一个叫file的文件夹内。

相对路径同样可以用在ls命令中，ls命令默认打印当前工作路径中的文件信息，我们也可以在后面接上一个路径，让其打印这个路径中的文件信息，比如，假设我们现在还在C://User/Kevin/Desktop中，我们可以通过

ls ./text

来直接打印text文件夹中的文件信息，不需要cd进去在ls。

一般情况下，能用绝对路径的地方，都可以替换成相对路径，在使用相对路径的时候，最重要的是确认当前工作路径是哪里，并且关注当前工作路径里外的文件/文件夹结构。

## cat/head/tail：打印文件的内容

现在，我们知道了，这地方是哪，这地方有什么，以及怎么去别的地方。现在我们来说怎样看文件里都写了啥。

cat head和tail命令用于在powershell上打印文件的内容。这三个命令都会默认文件是一个文本文件，即文件的内容是文字。如果文件是一个视频文件，这几个命令也会将其当成文本文件输出内容，因此会输出乱码。

假设当前工作路径下现在有一个文本文件：students.txt 保存了当前年级的所有学生的信息。一条对应一个人信息，比如：

``` shell
姓名	排名	总分

张三	1	300

李四	2	298

小明	3	295

韩梅梅	4	289

玩也行	5	288

...（此处省略1000行）

张飞	1006	103

刘备	1007	97

诸葛亮	1008	0
```

我们可以用：

cat students.txt 回车

powershell会打印student.txt的所有行，即所有学生的信息。但是有时候我们不想要所有的学生，我们看前几个学生是谁，这时候可以用命令：

```shell
head student.txt 回车
```

powershell会打印student.txt中前十行的信息，其中共包括表头和9个学生的信息，因为表中是按照成绩排名的，所以我我们得到的是前九名的学生的成绩信息。但是如果我们想要前十名的怎么办呢？

```shell
head -n 11 student.txt 回车
```

powershell会打印student.txt的前11行，包括表头+前10个学生的信息。这里 “-n 数字” 是一个输入head的参数，说明希望head这个程序输出文件的前11行，如果不设定”-n 数字“，则如上面的例子一样，head默认打印10行。

tail命令和head命令的作用正好相反，打印的是文件尾部的信息，比如tail students.txt打印倒数前十名的学生信息。注意这里为什么不是倒数前九呢？因为这个文件尾巴的部分并没有表头的“姓名	排名	总分”。同样的，用 tail -n 100 可以打印带文件后100行的信息。

### 强制终止程序：Ctrl+C

如果现在出现这样一个情况：小玩同学很好奇，用cat命令打开了一个有100亿行的文件，然后发现powershell中开始看似无止境的打印信息，这个时候小玩同学发现事情没有那么简单，想要停止powershell中这个“暴走”的cat，又不想直接关掉powershell，该怎么办呢？

这个时候小玩同学只需要按下Ctrl+C，便可以强制的停止正在运行的这个“暴走“的cat程序了。Ctrl+C会向系统的层级发出强制关闭信号，将当前正在面板上运行的程序关闭，并回收计算资源，具体的细节大家不必深究，只要知道，如果在powershell上跑的程序卡住了，想要停止，直接Ctrl+C即可。99%的情况可以解决问题。

### 清空面板：clear

在一番操作以后，小玩同学的powershell上乱七八糟的什么又有，这个时候小玩同学想将powershell上的信息直接清空，又不想重开powershell，这个时候小玩同学有两个方法：

1. 按住回车不放，直到面板干净为止
2. 输入 clear 回车

clear命令可以很方便的直接将powershell上打印的信息情况，是强迫症朋友的福音，也是玩老师我最常用的命令之一，传授给大家。

### 奇技淫巧

powershell的功能远不如此，之前说了，powershell上可以做几乎任何事情，既然可以跑很多有趣的没有界面的软件，自然会又很多好玩的功能，比如，定时自动关机：

``` shell
Shutdown.exe -s -t 3600 // 这里-s是告诉程序要做的是”关机“，-t设置时间，3600指3600秒。这句命令的意思：1小时后关机
```

或可以

``` shell
Shutdown.exe -i
```

直接打开自动关机设置图形界面进行设置，是的，运气很不错，Shutdown这个程序有一个设置界面。其他的设置大家可以百度。

在比如，突然想要记一些什么东西的时候，不用等word漫长的打开了，直接输入notepad，记事本就会打开，记录后Ctrl+S，一气呵成。这种小功能有很多很多，这里就不过多介绍了，有兴趣的同学们可以自己稍微了解一下。

### 总结

最后给大家总结一下这节课学的内容。

我们知道了powershell是什么以及有什么用，这是基础的基础

我们学到了工作路径的概念，并学会了使用pwd查询当前的工作路径。

我们学会了用ls命令查询当前工作路径下有什么文件或文件夹

我们学会了相对路径和绝对路径的概念，并用cd命令从我们当前的工作路径出发，到我们想要的地方

我们学会了用cat，head和tail命令查看文件的内容

最后，我们学会了如何强制程序停止，清空powershell的面板，以及定时关机。

下节课开始，我们的大部分内容都与powershell有关，因为那些我们希望拿来用的”别人的代码“，基本都需要在powershell中运行。比如，我们下节课介绍的python，以及用python语言写的代码，都需要在powershell上用命令的形式执行。



